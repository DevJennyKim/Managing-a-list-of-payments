<div class="hidden md:block overflow-x-auto mt-4">
  <table
    mat-table
    [dataSource]="payments"
    class="mat-elevation-z8 w-full text-sm text-left text-gray-500"
  >
    <ng-container matColumnDef="fullname">
      <th mat-header-cell *matHeaderCellDef class="px-6 py-3 bg-gray-100">
        Name
      </th>
      <td mat-cell *matCellDef="let payment" class="px-6 py-4">
        {{ payment.payee_first_name }} {{ payment.payee_last_name }}
      </td>
    </ng-container>

    <ng-container matColumnDef="paymentStatus">
      <th mat-header-cell *matHeaderCellDef class="px-6 py-3 bg-gray-100">
        Status
      </th>
      <td mat-cell *matCellDef="let payment" class="px-6 py-4">
        {{ payment.payee_payment_status }}
      </td>
    </ng-container>

    <ng-container matColumnDef="dueDate">
      <th mat-header-cell *matHeaderCellDef class="px-6 py-3 bg-gray-100">
        Due Date
      </th>
      <td mat-cell *matCellDef="let payment" class="px-6 py-4">
        {{ payment.payee_due_date }}
      </td>
    </ng-container>

    <ng-container matColumnDef="address">
      <th mat-header-cell *matHeaderCellDef class="px-6 py-3 bg-gray-100">
        Address
      </th>
      <td mat-cell *matCellDef="let payment" class="px-6 py-4">
        {{ payment.payee_address_line_1 }} {{ payment.payee_address_line_2 }}
      </td>
    </ng-container>

    <ng-container matColumnDef="location">
      <th mat-header-cell *matHeaderCellDef class="px-6 py-3 bg-gray-100">
        Location
      </th>
      <td mat-cell *matCellDef="let payment" class="px-6 py-4">
        {{ payment.payee_city }}, {{ payment.payee_province_or_state }},
        {{ payment.payee_country }}
      </td>
    </ng-container>

    <ng-container matColumnDef="phoneNumber">
      <th mat-header-cell *matHeaderCellDef class="px-6 py-3 bg-gray-100">
        Phone
      </th>
      <td mat-cell *matCellDef="let payment" class="px-6 py-4">
        +{{ payment.payee_phone_number }}
      </td>
    </ng-container>

    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef class="px-6 py-3 bg-gray-100">
        Email
      </th>
      <td mat-cell *matCellDef="let payment" class="px-6 py-4">
        {{ payment.payee_email }}
      </td>
    </ng-container>

    <ng-container matColumnDef="totalDue">
      <th mat-header-cell *matHeaderCellDef class="px-6 py-3 bg-gray-100">
        Total Due
      </th>
      <td mat-cell *matCellDef="let payment" class="px-6 py-4">
        {{ payment.total_due | formatCurrency : payment.currency }}
      </td>
    </ng-container>

    <ng-container matColumnDef="edit">
      <th mat-header-cell *matHeaderCellDef class="px-6 py-3 bg-gray-100"></th>
      <td mat-cell *matCellDef="let btns" class="px-6 py-4">
        <button
          class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200"
        >
          Edit
        </button>
      </td>
    </ng-container>

    <ng-container matColumnDef="delete">
      <th mat-header-cell *matHeaderCellDef class="px-6 py-3 bg-gray-100"></th>
      <td mat-cell *matCellDef="let btns" class="px-6 py-4">
        <button
          class="bg-red-400 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition duration-200"
        >
          Delete
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>

<div class="block md:hidden">
  <div
    *ngFor="let payment of payments"
    class="border p-4 mb-4 rounded-lg shadow-md bg-white"
  >
    <h3 class="text-xl font-semibold">
      {{ payment.payee_first_name }} {{ payment.payee_last_name }}
    </h3>
    <p><strong>Status:</strong> {{ payment.payee_payment_status }}</p>
    <p><strong>Due Date:</strong> {{ payment.payee_due_date }}</p>
    <p>
      <strong>Address:</strong> {{ payment.payee_address_line_1 }}
      {{ payment.payee_address_line_2 }}
    </p>
    <p>
      <strong>Location:</strong> {{ payment.payee_city }},
      {{ payment.payee_province_or_state }}, {{ payment.payee_country }}
    </p>
    <p><strong>Phone:</strong> +{{ payment.payee_phone_number }}</p>
    <p><strong>Email:</strong> {{ payment.payee_email }}</p>
    <p>
      <strong>Total Due:</strong>
      {{ payment.total_due | formatCurrency : payment.currency }}
    </p>
    <div class="flex justify-between">
      <button
        class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200"
      >
        Edit
      </button>
      <button
        class="bg-red-400 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition duration-200"
      >
        Delete
      </button>
    </div>
  </div>
</div>

<div class="pagination mt-4 flex justify-center items-center space-x-2">
  <button
    class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-200 disabled:opacity-50"
    (click)="goToPrevious()"
    [disabled]="currentPage === 1"
  >
    &lt; Prev
  </button>

  <button
    *ngFor="let page of pageRange"
    class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-200 disabled:opacity-50"
    [class.bg-orange-100]="currentPage === page"
    [class.text-white]="currentPage === page"
    (click)="onPageChanged(page)"
  >
    {{ page }}
  </button>

  <button
    class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-200 disabled:opacity-50"
    (click)="goToNext()"
    [disabled]="currentPage === totalPages"
  >
    Next &gt;
  </button>
</div>
